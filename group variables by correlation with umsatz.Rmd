---
title: "R Notebook"
output: html_notebook
---
```{r}
library(readr)
library(ggplot2)
library(dplyr)
library(rvest)
```

```{r}
umsatzdaten <- read_csv("https://raw.githubusercontent.com/opencampus-sh/einfuehrung-in-data-science-und-ml/main/umsatzdaten_gekuerzt.csv")

data <- aggregate(umsatzdaten$Umsatz, by=list(umsatzdaten$Datum), FUN=sum)
colnames(data) <- c("Datum", "Tagesumsatz")

weather <- read_csv("https://raw.githubusercontent.com/opencampus-sh/einfuehrung-in-data-science-und-ml/main/wetter.csv", show_col_types = FALSE)

#import and join weather codes
webpage <- read_html(paste("http://www.seewetter-kiel.de/seewetter/daten_symbole.htm")) #read html page
weather_codes <- html_table(webpage, trim = TRUE)#turn all html-tables into a list of table-DFs
weather_codes <- weather_codes[[1]]# select first element of list of DFs

weather_codes <- weather_codes[-1]#drop first column

colnames(weather_codes)[1] <- "Wettercode"#rename first column to for left_join with full_Dataset

weather <- left_join(weather, weather_codes, by = "Wettercode")

data <- left_join(data, weather, by = "Datum")

#GesamtumsÃ¤tze pro Datum aggregieren

ggplot(data, aes(x=Wettercode, y=Tagesumsatz)) + 
    geom_point() + breaks = as.character(c(1:95))
```

